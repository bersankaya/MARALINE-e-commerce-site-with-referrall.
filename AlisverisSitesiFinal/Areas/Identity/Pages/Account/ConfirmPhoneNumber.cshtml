@page
@model AlisverisSitesiFinal.Areas.Identity.Pages.Account.ConfirmPhoneNumberModel
@{
    ViewData["Title"] = "Telefon Numarası Onayı";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />

<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-12 col-sm-10 col-md-7 col-lg-6">
            <div class="card shadow-sm border-0 rounded-4">
                <div class="card-body p-4">
                    <h1 class="h5 fw-bold mb-3 text-center">Telefon Numarası Onayı</h1>

                    @if (!string.IsNullOrEmpty(Model.StatusMessage))
                    {
                        <div class="alert alert-info rounded-3">@Model.StatusMessage</div>
                    }

                    <!-- Adım 1: Kodu Gönder -->
                    <form method="post" asp-page-handler="SendCode" class="mb-4" novalidate>
                        <div class="mb-2">
                            <label asp-for="Input.PhoneNumber" class="form-label">Telefon Numarası</label>
                            <input asp-for="Input.PhoneNumber" class="form-control" inputmode="numeric" placeholder="05XXXXXXXXX" />
                            <span asp-validation-for="Input.PhoneNumber" class="text-danger small"></span>
                        </div>
                        <button class="btn btn-dark w-100 rounded-3 py-2">Kodu Gönder</button>
                    </form>

                    <!-- Adım 2: Kodu Doğrula -->
                    <form method="post" asp-page-handler="Verify" novalidate>
                        <div class="mb-2">
                            <label asp-for="Input.Code" class="form-label">SMS Doğrulama Kodu</label>
                            <input asp-for="Input.Code" class="form-control" maxlength="8" placeholder="Örn: 123456" />
                            <span asp-validation-for="Input.Code" class="text-danger small"></span>
                        </div>
                        <input type="hidden" asp-for="Input.PhoneNumber" />
                        <button class="btn btn-success w-100 rounded-3 py-2">Doğrula</button>
                    </form>

                    <div class="text-center mt-3">
                        <a href="~/">Anasayfaya dön</a>
                    </div>
                </div>
            </div>

            <p class="text-muted mt-3 small text-center">
                Kod ulaşmadı mı? Birkaç dakika bekleyip yeniden göndermeyi deneyin.
            </p>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
